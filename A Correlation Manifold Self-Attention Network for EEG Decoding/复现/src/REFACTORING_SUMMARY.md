# é¡¹ç›®é‡æ„å¯¹æ¯”æ€»ç»“

æœ¬æ–‡æ¡£å±•ç¤º CMSAN é¡¹ç›®é‡æ„å‰åçš„å¯¹æ¯”ï¼Œå¸®åŠ©ç†è§£é‡æ„çš„ä»·å€¼ã€‚

---

## ğŸ“Š é‡æ„å‰åå¯¹æ¯”

### é‡æ„å‰ (æ—§ç»“æ„)

```
src/
â”œâ”€â”€ cmsan/
â”‚   â”œâ”€â”€ layers/
â”‚   â”œâ”€â”€ model.py
â”‚   â””â”€â”€ train.py              âŒ åç§°å®¹æ˜“æ··æ·†
â”œâ”€â”€ download_data.py          âŒ æ•°æ®å·¥å…·æ•£è½åœ¨æ ¹ç›®å½•
â”œâ”€â”€ load_data.py              âŒ 
â”œâ”€â”€ explore_data.py           âŒ 
â”œâ”€â”€ main.py                   âŒ åŠŸèƒ½å•ä¸€
â”œâ”€â”€ run_experiment.py         âŒ ç”¨é€”ä¸æ˜ç¡®
â”œâ”€â”€ run_fast.py               âŒ ç”¨é€”ä¸æ˜ç¡®
â”œâ”€â”€ requirements.txt
â””â”€â”€ eeg_data.npz              âŒ æ•°æ®æ–‡ä»¶æ··åœ¨ä»£ç ä¸­
    model.pkl                 âŒ æ¨¡å‹æ–‡ä»¶æ··åœ¨ä»£ç ä¸­
```

**é—®é¢˜**:
- âŒ ä»£ç ã€æ•°æ®ã€æ¨¡å‹æ–‡ä»¶æ··åœ¨ä¸€èµ·
- âŒ è„šæœ¬ç”¨é€”ä¸æ¸…æ™°ï¼ˆrun_experiment vs run_fastï¼Ÿï¼‰
- âŒ æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼Œå‚æ•°ç¡¬ç¼–ç 
- âŒ ä¸åŒºåˆ†ä½œè€…æ•°æ®å’Œè‡ªå·±çš„æ•°æ®
- âŒ ç¼ºä¹ç»Ÿä¸€çš„å…¥å£å’Œæ–‡æ¡£

---

### é‡æ„å (æ–°ç»“æ„)

```
src/
â”œâ”€â”€ cmsan/                        âœ… æ ¸å¿ƒç®—æ³•åº“ï¼ˆçº¯å‡€ï¼‰
â”‚   â”œâ”€â”€ layers/
â”‚   â”œâ”€â”€ model.py
â”‚   â””â”€â”€ train_engine.py           âœ… æ˜ç¡®å‘½å
â”‚
â”œâ”€â”€ data/                         âœ… æ•°æ®å­˜æ”¾åŒº
â”‚   â”œâ”€â”€ author_original/          âœ… ä½œè€…æ•°æ®
â”‚   â”œâ”€â”€ my_custom/                âœ… è‡ªå·±çš„æ•°æ®
â”‚   â”œâ”€â”€ raw/                      âœ… åŸå§‹æ•°æ®
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ scripts/                      âœ… è„šæœ¬åŒºï¼ˆä¸‰ç»´åº¦ï¼‰
â”‚   â”œâ”€â”€ reproduce_paper.py        âœ… ç»´åº¦ä¸€ï¼šä½œè€…åŸæ–‡
â”‚   â”œâ”€â”€ my_reproduction.py        âœ… ç»´åº¦äºŒï¼šæˆ‘çš„å¤ç°
â”‚   â”œâ”€â”€ run_application.py        âœ… ç»´åº¦ä¸‰ï¼šæ¡†æ¶åº”ç”¨
â”‚   â”œâ”€â”€ data_utils/               âœ… æ•°æ®å·¥å…·é›†ä¸­ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ download_data.py
â”‚   â”‚   â”œâ”€â”€ load_data.py
â”‚   â”‚   â””â”€â”€ explore_data.py
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ checkpoints/                  âœ… æ¨¡å‹æƒé‡å­˜æ”¾
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ configs/                      âœ… é…ç½®æ–‡ä»¶åŒº
â”‚   â”œâ”€â”€ paper_config.yaml         âœ… è®ºæ–‡å›ºå®šå‚æ•°
â”‚   â””â”€â”€ custom_config.yaml        âœ… è‡ªå®šä¹‰å‚æ•°
â”‚
â”œâ”€â”€ main.py                       âœ… ç»Ÿä¸€å…¥å£ï¼ˆä¸‰ç§æ¨¡å¼ï¼‰
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md                     âœ… å®Œæ•´é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ USAGE_GUIDE.md                âœ… è¯¦ç»†ä½¿ç”¨æŒ‡å—
â””â”€â”€ MIGRATION_GUIDE.md            âœ… è¿ç§»æŒ‡å—
```

**ä¼˜åŠ¿**:
- âœ… ä»£ç ã€æ•°æ®ã€é…ç½®ã€æƒé‡åˆ†ç¦»
- âœ… è„šæœ¬ç”¨é€”ä¸€ç›®äº†ç„¶
- âœ… é…ç½®æ–‡ä»¶åŒ–ï¼Œæ˜“äºè°ƒå‚
- âœ… æ˜ç¡®åŒºåˆ†ä¸åŒæ¥æºçš„æ•°æ®
- âœ… å®Œå–„çš„æ–‡æ¡£å’Œç»Ÿä¸€çš„å…¥å£

---

## ğŸ¯ ä¸‰ç»´åº¦å®éªŒæ¡†æ¶

é‡æ„çš„æ ¸å¿ƒç†å¿µæ˜¯å°†å®éªŒåˆ†ä¸ºä¸‰ä¸ªç»´åº¦ï¼Œæ¯ä¸ªç»´åº¦æœ‰æ˜ç¡®çš„ç›®çš„å’Œç‹¬ç«‹çš„è„šæœ¬ã€‚

### å¯¹æ¯”è¡¨

| ç»´åº¦ | æ—§æ–¹å¼ | æ–°æ–¹å¼ | æ”¹è¿› |
|------|--------|--------|------|
| **ç»´åº¦ä¸€<br>ä½œè€…åŸè¯** | ä½¿ç”¨ `main.py`<br>å‚æ•°ä¸å›ºå®š | ä¸“ç”¨è„šæœ¬ `reproduce_paper.py`<br>å‚æ•°å›ºå®šåœ¨é…ç½®æ–‡ä»¶ | âœ… å¯é‡å¤æ€§æ›´å¥½<br>âœ… ä½œä¸º"å®šæµ·ç¥é’ˆ" |
| **ç»´åº¦äºŒ<br>æˆ‘çš„å¤ç°** | `run_experiment.py`<br>åç§°ä¸æ¸…æ™° | `my_reproduction.py`<br>10-fold CV | âœ… ç”¨é€”æ˜ç¡®<br>âœ… å®Œæ•´å®éªŒæµç¨‹ |
| **ç»´åº¦ä¸‰<br>æ¡†æ¶åº”ç”¨** | `run_fast.py`<br>åç§°ä¸æ¸…æ™° | `run_application.py`<br>CPU ä¼˜åŒ– | âœ… å±•ç¤ºæ‰©å±•æ€§<br>âœ… å¿«é€Ÿè¿­ä»£ |

---

## ğŸ“ ä½¿ç”¨æ–¹å¼å¯¹æ¯”

### æ—§æ–¹å¼

```bash
# ä¸æ¸…æ¥šè¯¥ç”¨å“ªä¸ªè„šæœ¬
python main.py --data eeg_data.npz  # â“ è¿™æ˜¯ä½œè€…æ•°æ®è¿˜æ˜¯æˆ‘çš„æ•°æ®ï¼Ÿ
python run_experiment.py --data data --dataset bcic  # â“ ä¸ºä»€ä¹ˆå« run_experimentï¼Ÿ
python run_fast.py --data data --dataset all  # â“ å’Œä¸Šé¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
```

### æ–°æ–¹å¼

```bash
# ç»´åº¦ä¸€ï¼šä½œè€…åŸæ–‡å®éªŒï¼ˆå‚æ•°å›ºå®šï¼‰
python scripts/reproduce_paper.py --data data/author_original/eeg_data.npz

# ç»´åº¦äºŒï¼šæˆ‘çš„å¤ç°ï¼ˆå®Œæ•´ 10-fold CVï¼‰
python scripts/my_reproduction.py --data data/my_custom --dataset bcic

# ç»´åº¦ä¸‰ï¼šæ¡†æ¶åº”ç”¨ï¼ˆå¿«é€Ÿå®éªŒï¼‰
python scripts/run_application.py --data data/my_custom --dataset all

# æˆ–é€šè¿‡ç»Ÿä¸€å…¥å£
python main.py --mode paper --data data/author_original/eeg_data.npz
python main.py --mode reproduce --data data/my_custom --dataset bcic
python main.py --mode fast --data data/my_custom --dataset all
```

---

## ğŸ”§ é…ç½®ç®¡ç†å¯¹æ¯”

### æ—§æ–¹å¼

**é—®é¢˜**: å‚æ•°ç¡¬ç¼–ç åœ¨è„šæœ¬ä¸­

```python
# åœ¨ main.py ä¸­
parser.add_argument('--epochs', type=int, default=50)  # ä¸ºä»€ä¹ˆæ˜¯ 50ï¼Ÿ
parser.add_argument('--lr', type=float, default=5e-4)  # è®ºæ–‡ç”¨çš„æ˜¯å¤šå°‘ï¼Ÿ

# åœ¨ run_experiment.py ä¸­
epochs=100  # ç¡¬ç¼–ç ï¼Œéš¾ä»¥ç®¡ç†
```

### æ–°æ–¹å¼

**ä¼˜åŠ¿**: é…ç½®æ–‡ä»¶åŒ–ï¼Œæ˜“äºç®¡ç†å’Œå¯¹æ¯”

```yaml
# configs/paper_config.yaml (ä½œè€…å›ºå®šå‚æ•°)
bcic:
  D: 20          # è®ºæ–‡è®¾ç½®
  epochs: 100    # è®ºæ–‡è®¾ç½®
  lr: 5.0e-4     # è®ºæ–‡è®¾ç½®
  seed: 42       # å›ºå®šç§å­ï¼Œä¿è¯å¯é‡å¤æ€§

# configs/custom_config.yaml (æˆ‘çš„å‚æ•°ï¼Œå¯è°ƒæ•´)
bcic:
  D: 25          # âœ… æˆ‘å°è¯•å¢åŠ ç‰¹å¾ç»´åº¦
  epochs: 150    # âœ… æˆ‘å°è¯•å¢åŠ è®­ç»ƒè½®æ•°
  lr: 1.0e-3     # âœ… æˆ‘å°è¯•æ›´å¤§çš„å­¦ä¹ ç‡
```

---

## ğŸ“š æ–‡æ¡£å¯¹æ¯”

### æ—§æ–¹å¼

- åªæœ‰ä¸€ä¸ª `README.md`
- ç¼ºå°‘ä½¿ç”¨æŒ‡å—
- æ²¡æœ‰è¿ç§»è¯´æ˜

### æ–°æ–¹å¼

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| `README.md` | é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¼€å§‹ |
| `USAGE_GUIDE.md` | è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼ˆä¸‰ç§æ¨¡å¼ï¼‰ |
| `MIGRATION_GUIDE.md` | å¸®åŠ©æ—§ç”¨æˆ·è¿ç§» |
| `data/README.md` | æ•°æ®ç›®å½•è¯´æ˜ |
| `checkpoints/README.md` | æ¨¡å‹å­˜å‚¨è¯´æ˜ |

---

## ğŸ’¡ é‡æ„å¸¦æ¥çš„å¥½å¤„

### 1. **æ¸…æ™°æ€§**
- âœ… ä¸€çœ¼å°±èƒ½çœ‹å‡ºé¡¹ç›®ç»“æ„
- âœ… çŸ¥é“åœ¨å“ªé‡Œæ‰¾ä»€ä¹ˆ

### 2. **å¯ç»´æŠ¤æ€§**
- âœ… æ–°å¢å®éªŒåªéœ€æ·»åŠ è„šæœ¬
- âœ… ä¸å½±å“æ ¸å¿ƒåº“ä»£ç 

### 3. **å¯æ‰©å±•æ€§**
- âœ… æ˜“äºæ·»åŠ æ–°æ•°æ®é›†
- âœ… æ˜“äºå°è¯•ä¸åŒè¶…å‚æ•°

### 4. **ä¸“ä¸šæ€§**
- âœ… ç¬¦åˆå­¦æœ¯é¡¹ç›®è§„èŒƒ
- âœ… ä¾¿äºä¸ä»–äººåˆ†äº«å’Œåä½œ

### 5. **å¯é‡å¤æ€§**
- âœ… é…ç½®æ–‡ä»¶åŒ–
- âœ… å›ºå®šç§å­å’Œå‚æ•°
- âœ… æ˜ç¡®åŒºåˆ†ä¸åŒå®éªŒ

---

## ğŸš€ ä¸‹ä¸€æ­¥

é‡æ„å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. **è¿è¡Œä½œè€…åŸæ–‡å®éªŒ** (ç»´åº¦ä¸€)
   ```bash
   python scripts/reproduce_paper.py --data data/author_original/eeg_data.npz
   ```

2. **è¿›è¡Œå®Œæ•´å¤ç°** (ç»´åº¦äºŒ)
   ```bash
   python scripts/my_reproduction.py --data data/my_custom --dataset bcic
   ```

3. **å¿«é€Ÿè¿­ä»£å®éªŒ** (ç»´åº¦ä¸‰)
   ```bash
   python scripts/run_application.py --data data/my_custom --dataset all
   ```

---

## ğŸ“ˆ æ€»ç»“

è¿™æ¬¡é‡æ„ä¸ä»…ä»…æ˜¯ç§»åŠ¨æ–‡ä»¶ï¼Œè€Œæ˜¯ï¼š
- ğŸ¯ **æ˜ç¡®å®éªŒç›®çš„** - ä¸‰ä¸ªç»´åº¦ï¼Œå„æœ‰åˆ†å·¥
- ğŸ“ **è§„èŒƒé¡¹ç›®ç»“æ„** - ä»£ç ã€æ•°æ®ã€é…ç½®åˆ†ç¦»
- ğŸ“ **å®Œå–„æ–‡æ¡£** - è®©é¡¹ç›®æ˜“äºä½¿ç”¨å’Œç†è§£
- ğŸ”§ **æé«˜å¯ç»´æŠ¤æ€§** - ä¾¿äºæ‰©å±•å’Œåä½œ

**ä»"å¼€å‘è¿‡ç¨‹æ€"åˆ°"ä¸“ä¸šé¡¹ç›®æ€"** âœ¨
